import { FORMAT_DEFAULT } from '../../constant';
<<<<<<< HEAD
export default (function (o, c) {
=======
export default (function (o, c, d) {
>>>>>>> b7d9a72a2deb36fa2a88334f678f5253599d69bf
  // locale needed later
  var proto = c.prototype;
  var oldFormat = proto.format;

<<<<<<< HEAD
=======
  d.en.ordinal = function (number) {
    var s = ['th', 'st', 'nd', 'rd'];
    var v = number % 100;
    return "[" + number + (s[(v - 20) % 10] || s[v] || s[0]) + "]";
  }; // extend en locale here


>>>>>>> b7d9a72a2deb36fa2a88334f678f5253599d69bf
  proto.format = function (formatStr) {
    var _this = this;

    var locale = this.$locale();
<<<<<<< HEAD

    if (!this.isValid()) {
      return oldFormat.bind(this)(formatStr);
    }

    var utils = this.$utils();
    var str = formatStr || FORMAT_DEFAULT;
    var result = str.replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g, function (match) {
=======
    var utils = this.$utils();
    var str = formatStr || FORMAT_DEFAULT;
    var result = str.replace(/\[([^\]]+)]|Q|wo|ww|w|gggg|Do|X|x|k{1,2}|S/g, function (match) {
>>>>>>> b7d9a72a2deb36fa2a88334f678f5253599d69bf
      switch (match) {
        case 'Q':
          return Math.ceil((_this.$M + 1) / 3);

        case 'Do':
          return locale.ordinal(_this.$D);

        case 'gggg':
          return _this.weekYear();

<<<<<<< HEAD
        case 'GGGG':
          return _this.isoWeekYear();

=======
>>>>>>> b7d9a72a2deb36fa2a88334f678f5253599d69bf
        case 'wo':
          return locale.ordinal(_this.week(), 'W');
        // W for week

        case 'w':
        case 'ww':
          return utils.s(_this.week(), match === 'w' ? 1 : 2, '0');

<<<<<<< HEAD
        case 'W':
        case 'WW':
          return utils.s(_this.isoWeek(), match === 'W' ? 1 : 2, '0');

=======
>>>>>>> b7d9a72a2deb36fa2a88334f678f5253599d69bf
        case 'k':
        case 'kk':
          return utils.s(String(_this.$H === 0 ? 24 : _this.$H), match === 'k' ? 1 : 2, '0');

        case 'X':
          return Math.floor(_this.$d.getTime() / 1000);

        case 'x':
          return _this.$d.getTime();

<<<<<<< HEAD
        case 'z':
          return "[" + _this.offsetName() + "]";

        case 'zzz':
          return "[" + _this.offsetName('long') + "]";

=======
>>>>>>> b7d9a72a2deb36fa2a88334f678f5253599d69bf
        default:
          return match;
      }
    });
    return oldFormat.bind(this)(result);
  };
});